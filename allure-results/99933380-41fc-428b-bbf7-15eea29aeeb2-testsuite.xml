<?xml version='1.0'?>
<ns2:test-suite xmlns:ns2='urn:model.allure.qatools.yandex.ru' start='1597855405157' stop='1597855405282'>
    <name>Mock service tests</name>
    <title>Mock service tests</title>
    <test-cases>
        <test-case start='1597855405157' status='failed' stop='1597855405282'>
            <name>should work</name>
            <title>should work</title>
            <labels>
                <label name='epic' value='FRP-1'/>
                <label name='feature' value='API tests'/>
            </labels>
            <parameters>
                <parameter kind='environment-variable' name='mockUrl' value='http://ec2-18-196-8-201.eu-central-1.compute.amazonaws.com:3000'/>
                <parameter kind='environment-variable' name='idServiceUrl' value='http://ec2-18-196-8-201.eu-central-1.compute.amazonaws.com:3000/_data'/>
            </parameters>
            <steps>
                <step start='1597855405158' status='passed' stop='1597855405258'>
                    <name>GET: http://ec2-18-196-8-201.eu-central-1.compute.amazonaws.com:3000/_data/?factoryId=123&amp;callback=aHR0cDovL2VjMi0xOC0xOTYtOC0yMDEuZXUtY2VudHJhbC0xLmNvbXB1dGUuYW1hem9uYXdzLmNvbTozMDAw</name>
                    <title>GET: http://ec2-18-196-8-201.eu-central-1.compute.amazonaws.com:3000/_data/?factoryId=123&amp;callback=aHR0cDovL2VjMi0xOC0xOTYtOC0yMDEuZXUtY2VudHJhbC0xLmNvbXB1dGUuYW1hem9uYXdzLmNvbTozMDAw</title>
                    <attachments/>
                    <steps/>
                </step>
                <step start='1597855405268' status='passed' stop='1597855405272'>
                    <name> -> response body</name>
                    <title> -> response body</title>
                    <attachments>
                        <attachment title='data' source='c5944772-764c-44ed-a3a5-fb5d1ea947ec-attachment.json' type='application/json' size='1177'/>
                    </attachments>
                    <steps/>
                </step>
            </steps>
            <attachments/>
            <failure>
                <message>Error: expect(received).toBe(expected) // Object.is equality
                
                - Expected  -  0
                + Received  + 11
                
                  Object {
                    "error": "Error: Bad request! x-test-session-id header is missing!",
                +   "stack": "Error: Bad request! x-test-session-id header is missing!
                +     at httpError (/home/ec2-user/lm-pet-ta-mock-factory/dist/_test.js:19:17)
                +     at /home/ec2-user/lm-pet-ta-mock-factory/dist/_test.js:32:21
                +     at Layer.handle [as handle_request] (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/layer.js:95:5)
                +     at trim_prefix (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:317:13)
                +     at /home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:284:7
                +     at Function.process_params (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:335:12)
                +     at next (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:275:10)
                +     at Function.handle (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:174:3)
                +     at router (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:47:12)
                +     at Layer.handle [as handle_request] (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/layer.js:95:5)",
                  }</message>
                <stack-trace>Error: expect(received).toBe(expected) // Object.is equality
                
                - Expected  -  0
                + Received  + 11
                
                  Object {
                    "error": "Error: Bad request! x-test-session-id header is missing!",
                +   "stack": "Error: Bad request! x-test-session-id header is missing!
                +     at httpError (/home/ec2-user/lm-pet-ta-mock-factory/dist/_test.js:19:17)
                +     at /home/ec2-user/lm-pet-ta-mock-factory/dist/_test.js:32:21
                +     at Layer.handle [as handle_request] (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/layer.js:95:5)
                +     at trim_prefix (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:317:13)
                +     at /home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:284:7
                +     at Function.process_params (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:335:12)
                +     at next (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:275:10)
                +     at Function.handle (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:174:3)
                +     at router (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/index.js:47:12)
                +     at Layer.handle [as handle_request] (/home/ec2-user/lm-pet-ta-mock-factory/node_modules/express/lib/router/layer.js:95:5)",
                  }
                    at C:\Users\Stanislav_Ursakii\Documents\repo\ts-service-mock-test\spec\poc\poc.test.ts:19:23
                    at Generator.next (&lt;anonymous>)
                    at fulfilled (C:\Users\Stanislav_Ursakii\Documents\repo\ts-service-mock-test\spec\poc\poc.test.ts:5:58)
                    at processTicksAndRejections (internal/process/task_queues.js:97:5)</stack-trace>
            </failure>
        </test-case>
    </test-cases>
</ns2:test-suite>